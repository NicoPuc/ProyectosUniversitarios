<% actividades_disponibles = Actividad.where.not(user: current_user) %>

<% if actividades_disponibles.any? %>
  <%= form_with model: @request do |form| %>
    <% if @request.new_record? %>
      <div class= "field" >
        <%= form.label :actividad_id, "Actividad" %>
        <%= form.collection_select :actividad_id, actividades_disponibles, :id, :titulo, class: "input" %>
      </div>
    <% else %>
      <div class= "field" >
        <h2 class= "title" >Editar solicitud para <%= @request.actividad.titulo %></h3>
      </div>
    <% end %>

    <div class= "field" >
      <br>
      <%= form.label :description %>
      <%= form.text_field :description, class: "input" %>
    </div>
    <br>
    <% if @request.new_record? %>
      <div class="actions">
        <button type="submit" class="Btn thick-btn">Enviar Solicitud
          <svg class="svg" viewBox="0 0 24 24">
            <line y2="19" y1="5" x2="12" x1="12"></line>
            <line y2="12" y1="12" x2="19" x1="5"></line>
          </svg>
        </button>
      </div>
    <% else %>
      <div class="actions">
        <button type="submit" class="Btn thick-btn">Actualizar Solicitud
          <svg class="svg" viewBox="0 0 24 24">
            <line y2="19" y1="5" x2="12" x1="12"></line>
            <line y2="12" y1="12" x2="19" x1="5"></line>
          </svg>
        </button>
      </div>
      <div class="actions">
        <div class="field">
          <p style="font-size: 2.5vh;"><strong>Status: </strong><%=@request.status%></p>
          <p style="font-size: 2.5vh;"><strong>Fecha: </strong><%=@request.fecha%></p>
        </div>
      </div>
    <% end %>
  <% end %>
<% else %>
  <p>No hay actividades disponibles para solicitar.</p>
<% end %>

<br><br>
<div class="actions">
    <button class="Btn Btn--grey thick-btn" onclick="history.back();">Volver
        <svg class="svg" viewBox="0 0 46 40">
            <path transform="rotate(180 23 20)" d="M46 20.038c0-.7-.3-1.5-.8-2.1l-16-17c-1.1-1-3.2-1.4-4.4-.3-1.2 1.1-1.2 3.3 0 4.4l11.3 11.9H3c-1.7 0-3 1.3-3 3s1.3 3 3 3h33.1l-11.3 11.9c-1 1-1.2 3.3 0 4.4 1.2 1.1 3.3.8 4.4-.3l16-17c.5-.5.8-1.1.8-1.9z"></path>
        </svg>
    </button>
</div>